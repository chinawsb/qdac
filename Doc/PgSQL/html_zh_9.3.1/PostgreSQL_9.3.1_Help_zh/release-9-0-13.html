<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>Release 9.0.13</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.3.1 中文文档"
HREF="index.html"><LINK
REL="UP"
TITLE="Release Notes"
HREF="release.html"><LINK
REL="PREVIOUS"
TITLE="Release 9.0.14"
HREF="release-9-0-14.html"><LINK
REL="NEXT"
TITLE="Release 9.0.12"
HREF="release-9-0-12.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=gbk"><META
NAME="creation"
CONTENT="2013-12-03T02:30:09"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.3.1 中文文档</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="Release 9.0.14"
HREF="release-9-0-14.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Appendix E. Release Notes</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="Release 9.0.12"
HREF="release-9-0-12.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="RELEASE-9-0-13"
>E.21. Release 9.0.13</A
></H1
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Release Date: </B
>2013-04-04</P
></BLOCKQUOTE
></DIV
><P
>   This release contains a variety of fixes from 9.0.12.
   For information about new features in the 9.0 major release, see
   <A
HREF="release-9-0.html"
>Section E.34</A
>.
  </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN120236"
>E.21.1. Migration to Version 9.0.13</A
></H2
><P
>    A dump/restore is not required for those running 9.0.X.
   </P
><P
>    However, this release corrects several errors in management of GiST
    indexes.  After installing this update, it is advisable to
    <TT
CLASS="COMMAND"
>REINDEX</TT
> any GiST indexes that meet one or more of the
    conditions described below.
   </P
><P
>    Also, if you are upgrading from a version earlier than 9.0.6,
    see the release notes for 9.0.6.
   </P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN120242"
>E.21.2. Changes</A
></H2
><P
></P
><UL
><LI
><P
>      Fix insecure parsing of server command-line switches (Mitsumasa
      Kondo, Kyotaro Horiguchi)
     </P
><P
>      A connection request containing a database name that begins with
      <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>-</TT
>"</SPAN
> could be crafted to damage or destroy
      files within the server's data directory, even if the request is
      eventually rejected.  (CVE-2013-1899)
     </P
></LI
><LI
><P
>      Reset OpenSSL randomness state in each postmaster child process
      (Marko Kreen)
     </P
><P
>      This avoids a scenario wherein random numbers generated by
      <TT
CLASS="FILENAME"
>contrib/pgcrypto</TT
> functions might be relatively easy for
      another database user to guess.  The risk is only significant when
      the postmaster is configured with <TT
CLASS="VARNAME"
>ssl</TT
> = <TT
CLASS="LITERAL"
>on</TT
>
      but most connections don't use SSL encryption.  (CVE-2013-1900)
     </P
></LI
><LI
><P
>      Fix GiST indexes to not use <SPAN
CLASS="QUOTE"
>"fuzzy"</SPAN
> geometric comparisons when
      it's not appropriate to do so (Alexander Korotkov)
     </P
><P
>      The core geometric types perform comparisons using <SPAN
CLASS="QUOTE"
>"fuzzy"</SPAN
>
      equality, but <CODE
CLASS="FUNCTION"
>gist_box_same</CODE
> must do exact comparisons,
      else GiST indexes using it might become inconsistent.  After installing
      this update, users should <TT
CLASS="COMMAND"
>REINDEX</TT
> any GiST indexes on
      <TT
CLASS="TYPE"
>box</TT
>, <TT
CLASS="TYPE"
>polygon</TT
>, <TT
CLASS="TYPE"
>circle</TT
>, or <TT
CLASS="TYPE"
>point</TT
>
      columns, since all of these use <CODE
CLASS="FUNCTION"
>gist_box_same</CODE
>.
     </P
></LI
><LI
><P
>      Fix erroneous range-union and penalty logic in GiST indexes that use
      <TT
CLASS="FILENAME"
>contrib/btree_gist</TT
> for variable-width data types, that is
      <TT
CLASS="TYPE"
>text</TT
>, <TT
CLASS="TYPE"
>bytea</TT
>, <TT
CLASS="TYPE"
>bit</TT
>, and <TT
CLASS="TYPE"
>numeric</TT
>
      columns (Tom Lane)
     </P
><P
>      These errors could result in inconsistent indexes in which some keys
      that are present would not be found by searches, and also in useless
      index bloat.  Users are advised to <TT
CLASS="COMMAND"
>REINDEX</TT
> such indexes
      after installing this update.
     </P
></LI
><LI
><P
>      Fix bugs in GiST page splitting code for multi-column indexes
      (Tom Lane)
     </P
><P
>      These errors could result in inconsistent indexes in which some keys
      that are present would not be found by searches, and also in indexes
      that are unnecessarily inefficient to search.  Users are advised to
      <TT
CLASS="COMMAND"
>REINDEX</TT
> multi-column GiST indexes after installing this
      update.
     </P
></LI
><LI
><P
>      Fix <CODE
CLASS="FUNCTION"
>gist_point_consistent</CODE
>
      to handle fuzziness consistently (Alexander Korotkov)
     </P
><P
>      Index scans on GiST indexes on <TT
CLASS="TYPE"
>point</TT
> columns would sometimes
      yield results different from a sequential scan, because
      <CODE
CLASS="FUNCTION"
>gist_point_consistent</CODE
> disagreed with the underlying
      operator code about whether to do comparisons exactly or fuzzily.
     </P
></LI
><LI
><P
>      Fix buffer leak in WAL replay (Heikki Linnakangas)
     </P
><P
>      This bug could result in <SPAN
CLASS="QUOTE"
>"incorrect local pin count"</SPAN
> errors
      during replay, making recovery impossible.
     </P
></LI
><LI
><P
>      Fix race condition in <TT
CLASS="COMMAND"
>DELETE RETURNING</TT
> (Tom Lane)
     </P
><P
>      Under the right circumstances, <TT
CLASS="COMMAND"
>DELETE RETURNING</TT
> could
      attempt to fetch data from a shared buffer that the current process
      no longer has any pin on.  If some other process changed the buffer
      meanwhile, this would lead to garbage <TT
CLASS="LITERAL"
>RETURNING</TT
> output, or
      even a crash.
     </P
></LI
><LI
><P
>      Fix infinite-loop risk in regular expression compilation (Tom Lane,
      Don Porter)
     </P
></LI
><LI
><P
>      Fix potential null-pointer dereference in regular expression compilation
      (Tom Lane)
     </P
></LI
><LI
><P
>      Fix <CODE
CLASS="FUNCTION"
>to_char()</CODE
> to use ASCII-only case-folding rules where
      appropriate (Tom Lane)
     </P
><P
>      This fixes misbehavior of some template patterns that should be
      locale-independent, but mishandled <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>I</TT
>"</SPAN
> and
      <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>i</TT
>"</SPAN
> in Turkish locales.
     </P
></LI
><LI
><P
>      Fix unwanted rejection of timestamp <TT
CLASS="LITERAL"
>1999-12-31 24:00:00</TT
>
      (Tom Lane)
     </P
></LI
><LI
><P
>      Fix logic error when a single transaction does <TT
CLASS="COMMAND"
>UNLISTEN</TT
>
      then <TT
CLASS="COMMAND"
>LISTEN</TT
> (Tom Lane)
     </P
><P
>      The session wound up not listening for notify events at all, though it
      surely should listen in this case.
     </P
></LI
><LI
><P
>      Remove useless <SPAN
CLASS="QUOTE"
>"picksplit doesn't support secondary split"</SPAN
> log
      messages (Josh Hansen, Tom Lane)
     </P
><P
>      This message seems to have been added in expectation of code that was
      never written, and probably never will be, since GiST's default
      handling of secondary splits is actually pretty good.  So stop nagging
      end users about it.
     </P
></LI
><LI
><P
>      Fix possible failure to send a session's last few transaction
      commit/abort counts to the statistics collector (Tom Lane)
     </P
></LI
><LI
><P
>      Eliminate memory leaks in PL/Perl's <CODE
CLASS="FUNCTION"
>spi_prepare()</CODE
> function
      (Alex Hunsaker, Tom Lane)
     </P
></LI
><LI
><P
>      Fix <SPAN
CLASS="APPLICATION"
>pg_dumpall</SPAN
> to handle database names containing
      <SPAN
CLASS="QUOTE"
>"<TT
CLASS="LITERAL"
>=</TT
>"</SPAN
> correctly (Heikki Linnakangas)
     </P
></LI
><LI
><P
>      Avoid crash in <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
> when an incorrect connection
      string is given (Heikki Linnakangas)
     </P
></LI
><LI
><P
>      Ignore invalid indexes in <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
> and
      <SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
> (Michael Paquier, Bruce Momjian)
     </P
><P
>      Dumping invalid indexes can cause problems at restore time, for example
      if the reason the index creation failed was because it tried to enforce
      a uniqueness condition not satisfied by the table's data.  Also, if the
      index creation is in fact still in progress, it seems reasonable to
      consider it to be an uncommitted DDL change, which
      <SPAN
CLASS="APPLICATION"
>pg_dump</SPAN
> wouldn't be expected to dump anyway.
      <SPAN
CLASS="APPLICATION"
>pg_upgrade</SPAN
> now also skips invalid indexes rather than
      failing.
     </P
></LI
><LI
><P
>      Fix <TT
CLASS="FILENAME"
>contrib/pg_trgm</TT
>'s <CODE
CLASS="FUNCTION"
>similarity()</CODE
> function
      to return zero for trigram-less strings (Tom Lane)
     </P
><P
>      Previously it returned <TT
CLASS="LITERAL"
>NaN</TT
> due to internal division by zero.
     </P
></LI
><LI
><P
>      Update time zone data files to <SPAN
CLASS="APPLICATION"
>tzdata</SPAN
> release 2013b
      for DST law changes in Chile, Haiti, Morocco, Paraguay, and some
      Russian areas.  Also, historical zone data corrections for numerous
      places.
     </P
><P
>      Also, update the time zone abbreviation files for recent changes in
      Russia and elsewhere: <TT
CLASS="LITERAL"
>CHOT</TT
>, <TT
CLASS="LITERAL"
>GET</TT
>,
      <TT
CLASS="LITERAL"
>IRKT</TT
>, <TT
CLASS="LITERAL"
>KGT</TT
>, <TT
CLASS="LITERAL"
>KRAT</TT
>, <TT
CLASS="LITERAL"
>MAGT</TT
>,
      <TT
CLASS="LITERAL"
>MAWT</TT
>, <TT
CLASS="LITERAL"
>MSK</TT
>, <TT
CLASS="LITERAL"
>NOVT</TT
>, <TT
CLASS="LITERAL"
>OMST</TT
>,
      <TT
CLASS="LITERAL"
>TKT</TT
>, <TT
CLASS="LITERAL"
>VLAT</TT
>, <TT
CLASS="LITERAL"
>WST</TT
>, <TT
CLASS="LITERAL"
>YAKT</TT
>,
      <TT
CLASS="LITERAL"
>YEKT</TT
> now follow their current meanings, and
      <TT
CLASS="LITERAL"
>VOLT</TT
> (Europe/Volgograd) and <TT
CLASS="LITERAL"
>MIST</TT
>
      (Antarctica/Macquarie) are added to the default abbreviations list.
     </P
></LI
></UL
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="release-9-0-14.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="release-9-0-12.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Release 9.0.14</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="release.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Release 9.0.12</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>