<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>创建一个数据库</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:pgsql-docs@postgresql.org"><LINK
REL="HOME"
TITLE="PostgreSQL 9.3.1 中文文档"
HREF="index.html"><LINK
REL="UP"
TITLE="从头开始"
HREF="tutorial-start.html"><LINK
REL="PREVIOUS"
TITLE="体系基本概念"
HREF="tutorial-arch.html"><LINK
REL="NEXT"
TITLE="访问数据库"
HREF="tutorial-accessdb.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=gbk"><META
NAME="creation"
CONTENT="2013-12-03T02:30:09"></HEAD
><BODY
CLASS="SECT1"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
><A
HREF="index.html"
>PostgreSQL 9.3.1 中文文档</A
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
TITLE="体系基本概念"
HREF="tutorial-arch.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="tutorial-start.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
>Chapter 1. 从头开始</TD
><TD
WIDTH="20%"
ALIGN="right"
VALIGN="top"
><A
TITLE="访问数据库"
HREF="tutorial-accessdb.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="TUTORIAL-CREATEDB"
>1.3. 创建一个数据库</A
></H1
><P
>看看你能否访问数据库服务器的第一个例子就是试着创建一个数据库。一台运行着
的<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>服务器可以管理许多数据库。通常我们
会为每个项目和每个用户单独使用一个数据库。</P
><P
>节点管理员可能已经为你创建了可以使用的数据库。他应该已经告诉你这个数据库的
名字。如果这样你就可以省略这一步，并且跳到下一节。</P
><P
>要创建一个新的数据库，在我们这个例子里叫<TT
CLASS="LITERAL"
>mydb</TT
>，你可以使用下面的命令：

</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>createdb mydb</KBD
></PRE
><P>
如果不报错那么这一步就成功了，你就可以忽略本节余下的部分了。
   </P
><P
>   
如果你看到类似下面这样的信息：

</P><PRE
CLASS="SCREEN"
>createdb: command not found</PRE
><P>
那么就是<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>没有安装好：要么是就根本没装上、要么是搜索路径没有包含它。
尝试用绝对路径调用该命令试试：
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>/usr/local/pgsql/bin/createdb mydb</KBD
></PRE
><P>
在你的节点上这个路径可能不一样。请和管理员联系或者看看安装指导以获取正确的位置。
   </P
><P
>另外一种响应可能是这样：
</P><PRE
CLASS="SCREEN"
>createdb: could not connect to database postgres: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/tmp/.s.PGSQL.5432"?</PRE
><P>
这意味着服务器没有启动，或者没有在<TT
CLASS="COMMAND"
>createdb</TT
>预期的地方启动。同样，
你也要检查安装指导或者找管理员。
   </P
><P
>   
另外一个响应可能是这样：
</P><PRE
CLASS="SCREEN"
>createdb: could not connect to database postgres: FATAL:  role "joe" does not exist</PRE
><P>
在这里提到了你自己的登陆名。如果管理员没有为你创建<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>
用户帐号，就会发生这些现像。<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>用户帐号和操作系统用户帐
号是不同的。如果你就是管理员，参阅<A
HREF="user-manag.html"
>Chapter 20</A
>以获取创建用户帐号
的帮助。你需要变成安装<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>的操作系统用户的身份(通常
是<TT
CLASS="LITERAL"
>postgres</TT
>)才能创建第一个用户帐号。也有可能是你被赋予的<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>
用户名和操作系统用户名不同；这种情况下，你需要使用<TT
CLASS="OPTION"
>-U</TT
>开关或者使用
<TT
CLASS="ENVAR"
>PGUSER</TT
>环境变量声明<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>用户名。
   </P
><P
>   
如果你有个数据库用户帐号，但是没有创建数据库所需要的权限，那么你会看到下面的东西：
</P><PRE
CLASS="SCREEN"
>createdb: database creation failed: ERROR:  permission denied to create database</PRE
><P>
并非所有用户都获得了创建新数据库的授权。如果<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>
拒绝为你创建数据库，那么你需要让节点管理员赋予你创建数据库的权限。出现这种情况时
请咨询你的节点管理员。如果是你自己安装了<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>，那么
你应该以你启动数据库服务器的用户身份登录然后参考手册完成权限的赋予工作。
    <A
NAME="AEN468"
HREF="#FTN.AEN468"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
>
   </P
><P
>你还可以用其它名字创建数据库。<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>允许你在
一个节点上创建任意数量的数据库。数据库名必须是以字母开头并且小于 63 个字节
长。一个方便的做法是创建和你当前用户名同名的数据库。许多工具假设它为缺省的
数据库名，所以这样可以节省敲键。要创建这样的数据库，只需要键入：
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>createdb</KBD
></PRE
><P>
   </P
><P
>如果你再也不想使用你的数据库了，那么你可以删除它。比如，如果你是数据库
<TT
CLASS="LITERAL"
>mydb</TT
>的属主(创建人)，那么你就可以用下面的命令删除它：
</P><PRE
CLASS="SCREEN"
><SAMP
CLASS="PROMPT"
>$</SAMP
> <KBD
CLASS="USERINPUT"
>dropdb mydb</KBD
></PRE
><P>
对于这条命令而言，数据库名不是缺省的用户名，你必须明确声明它。这个动作物理
上将所有与该数据库相关的文件都删除并且不可恢复，因此做这件事之前一定要想清楚。
   </P
><P
> 更多关于<TT
CLASS="COMMAND"
>createdb</TT
>和<TT
CLASS="COMMAND"
>dropdb</TT
>的信息可以在 
 <A
HREF="app-createdb.html"
><SPAN
CLASS="APPLICATION"
>createdb</SPAN
></A
>和<A
HREF="app-dropdb.html"
><SPAN
CLASS="APPLICATION"
>dropdb</SPAN
></A
>小节找到。
 </P
></DIV
><H3
CLASS="FOOTNOTES"
>Notes</H3
><TABLE
BORDER="0"
CLASS="FOOTNOTES"
WIDTH="100%"
><TR
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="5%"
><A
NAME="FTN.AEN468"
HREF="tutorial-createdb.html#AEN468"
><SPAN
CLASS="footnote"
>[1]</SPAN
></A
></TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
WIDTH="95%"
><P
>为什么这么干就行了? 解释如下：<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>用户名
是和操作系统用户账号分开的。如果你与一个数据库连接，你可以指定以哪个
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>用户名进行连接；如果你不指定，那么缺省
就是你当前的操作系统账号。如果这样，那么总有一个与操作系统用户同名的
<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>用户账号用于启动服务器，并且通常这个用
户都有创建数据库的权限。如果你不想以该用户身份登陆，那么你也可以在任何地方
声明一个<TT
CLASS="OPTION"
>-U</TT
>选项来选择一个连接时使用的<SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
>用户名。</P
></TD
></TR
></TABLE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="tutorial-arch.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="tutorial-accessdb.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>体系基本概念</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="tutorial-start.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>访问数据库</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>